!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(c){"use strict";function d(a,b,c){var d=!0;try{a.setItem(b,c)}catch(e){d=!1}return d}function e(a){this.journeyId=a,this.storage=c.localStorage}var f="storage",g={event:a("../../Shared/Utils/Event.js"),json:a("../../Shared/Utils/Json.js")};e.prototype.init=function(a){var b=this,c=null;return b.callback=a,b.isSupported=b.isSupported(),b.isSupported&&(c=b.getJourneyItems(),g.event.addEvent(window,f,b)),c},e.prototype.handleEvent=function(a){var b,c=new RegExp("^"+this.journeyId+"\\.");a=a||window.event,a.type===f&&c.test(a.key)&&(b=this.getJourneyItems(),"function"==typeof this.callback&&this.callback(b))},e.prototype.isSupported=function(){var a=!1,b="test";try{this.storage.setItem(b,b),this.storage.removeItem(b),a=!0}catch(c){}return a},e.prototype.setItem=function(a,b){var c,e=!1;return this.isSupported&&(c=g.json.stringify(b),e=d(this.storage,this.journeyId+"."+a,c)),e},e.prototype.getItem=function(a){var b=this.storage.getItem(this.journeyId+"."+a);return g.json.parseJSON(b)},e.prototype.getJourneyItems=function(){var a,b,c,d,e=null,f=new RegExp("^"+this.journeyId+"\\.");if(this.isSupported)try{for(d=this.storage.length,e={},b=0;d>b;b++)a=this.storage.key(b),f.test(a)&&(c=this.storage.getItem(a),e[a.replace(f,"")]=g.json.parseJSON(c))}catch(h){e=null}return e},e.prototype.removeItem=function(a){this.isSupported&&this.storage.removeItem(this.journeyId+"."+a)},b.exports=e}(window)},{"../../Shared/Utils/Event.js":13,"../../Shared/Utils/Json.js":14}],2:[function(a,b,c){!function(){"use strict";function c(a,b){var c,d,e={},f=new RegExp("^"+b);for(c in a)f.test(c)&&(d=c.replace(f,""),e[d]=a[c]);return e}function d(a,b,c){var d=b.value,e=b.key,f=a.getItem("sessionId"),g=f===c;g&&b.hasOwnProperty("value")&&b.hasOwnProperty("key")&&a.setItem(c+"."+e,d)}function e(a,b,c){var d=b.key;b.hasOwnProperty("key")&&a.removeItem(c+"."+d)}function f(a,b){this.iframeId=b,this.journeyId=a,this.parentUrl=document.referrer.replace(/^([a-z]*:\/\/[^\/]+).*$/,"$1")||"*"}var g=1,h=2,i=3,j=a("./SharedStorage.js"),k=a("../../Shared/Utils/Event.js"),l=a("../../Shared/Utils/Json.js"),m=a("../../Shared/Classes/MessageManager.js");f.prototype.init=function(){this.sharedStorage=new j(this.journeyId),k.addEvent(window,"message",this),m.postMessage(window.parent,{id:this.iframeId,messageBody:"ready"},this.parentUrl)},f.prototype.checkExpiredSession=function(a){var b,c=this,d=a.sessionId,e=new RegExp("^"+d+"\\."),f=d!==c.sessionId;if(f){c.sharedStorage.setItem("sessionId",c.sessionId);for(b in a)e.test(b)&&c.sharedStorage.removeItem(b)}return f},f.prototype.updateParent=function(a){var b,d=this,e=a.sessionId,f=c(a,e+"\\.");e!==d.sessionId&&(f=null),b={id:d.iframeId,messageBody:f},m.postMessage(window.parent,b,d.parentUrl)},f.prototype.handleEvent=function(a){var b,c,f,j=this,k=j.sharedStorage;switch(a=a||window.event,b=l.parseJSON(a.data)||{},b.command){case g:j.sessionId=b.sessionId,c=k.init(function(a){j.updateParent(a)}),f=j.checkExpiredSession(c),f&&(c=k.getJourneyItems()),j.updateParent(c);break;case h:d(k,b,j.sessionId);break;case i:e(k,b,j.sessionId)}},b.exports=f}()},{"../../Shared/Classes/MessageManager.js":4,"../../Shared/Utils/Event.js":13,"../../Shared/Utils/Json.js":14,"./SharedStorage.js":1}],3:[function(a,b,c){!function(){"use strict";var b=a("../../Shared/Utils/Domain"),c=a("./StorageCommunicator"),d=b.getQueryParameter("journeyId"),e=b.getQueryParameter("iframeId"),f=new c(d,e);f.init()}()},{"../../Shared/Utils/Domain":12,"./StorageCommunicator":2}],4:[function(a,b,c){!function(){"use strict";function c(a,b,c){var d=f.indexOf(b,c)>-1;return!a||d}var d,e=function(){},f=a("../Utils/Array.js"),g=a("../Utils/Event.js"),h=a("../Utils/Json.js");d={subscriptions:{},init:function(a){function b(a){var b,e,g,j=a.origin.replace(/http(s)?/,""),k={};if(g=h.parseJSON(a.data)||{},e=d.subscriptions[g.id]||[],k.data=g,c(i,j,f))for(b=0;b<e.length;b++)"function"==typeof e[b].callback&&e[b].callback.call(e[b].context,k)}var d=this,f=[],i="*"!==a;i&&(a=a.replace(/http(s)?/,""),f.push(a)),d.subscriptions={},g.addEvent(window,"message",b,!1),d.init=e},subscribeTo:function(a,b,c){this.subscriptions[a]=this.subscriptions[a]||[],this.subscriptions[a].push({callback:b,context:c})},postMessage:function(a,b,c){"string"!=typeof b&&(b=h.stringify(b)),a.postMessage(b,c)},unsubscribeFrom:function(a,b){var c,d=this.subscriptions[a]||[];for(c=d.length-1;c>=0;c--)d[c].callback===b&&d.splice(c,1)}},b.exports=d}()},{"../Utils/Array.js":5,"../Utils/Event.js":13,"../Utils/Json.js":14}],5:[function(a,b,c){!function(){"use strict";var c,d=a("./Object.js");c={indexOf:function(a,b){if("undefined"==typeof b)throw new TypeError("Argument array should not be undefined or NULL.");return b.indexOf?this.indexOf=function(a,b){return b.indexOf(a)}:this.indexOf=function(a,b){var c,d=Object(b),e=d.length>>>0;if(e>0)for(c=0;e>c;c++)if(c in d&&d[c]===a)return c;return-1},this.indexOf(a,b)},removeElementFromArray:function(a,b){var c;for(c=0;c<a.length;c++)if(a[c]===b||"object"==typeof a[c]&&d.areEqual(a[c],b))return a.splice(c,1),a;return a},removeIndex:function(a,b){a[b]&&a.splice(b,1)},concatWithoutDuplicate:function(a,b){function c(a){var b;for(b=0;b<a.length;b++)-1===d.indexOf(a[b],e)&&e.push(a[b])}var d=this,e=[];return c(a),c(b),e},pushWithoutDuplicate:function(a,b){return-1===this.indexOf(a,b)&&b.push(a),b},removeNullElements:function(a){var b;for(b=0;b<a.length;b++)null===a[b]&&(a.splice(b,1),b--);return a}},b.exports=c}()},{"./Object.js":15}],6:[function(a,b,c){!function(){"use strict";var c=a("./Object"),d=a("./Dom/ClassNames"),e=a("./Dom/ElementSelectors"),f=a("./Dom/BodyDimensions"),g=a("./Dom/WindowDimensions"),h=a("./Dom/CrudElements"),i={};i=c.concatenate(i,d),i=c.concatenate(i,e),i=c.concatenate(i,f),i=c.concatenate(i,g),i=c.concatenate(i,h),b.exports=i}()},{"./Dom/BodyDimensions":7,"./Dom/ClassNames":8,"./Dom/CrudElements":9,"./Dom/ElementSelectors":10,"./Dom/WindowDimensions":11,"./Object":15}],7:[function(a,b,c){!function(){"use strict";var a;a={bodyHeight:0,getBodyWidth:function(){return document.body.offsetWidth},getBodyHeight:function(){return document.body.offsetHeight},getLastUpdatedBodyHeight:function(){return this.bodyHeight},updateBodyHeight:function(){this.bodyHeight=this.getBodyHeight()}},b.exports=a}()},{}],8:[function(a,b,c){!function(){"use strict";var a;a={hasClass:function(a,b){return a.classList?this.hasClass=function(a,b){return a.classList.contains(b)}:this.hasClass=function(a,b){return new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)").test(a.className)},this.hasClass(a,b)},addClass:function(a,b){a.classList?this.addClass=function(a,b){a.classList.add(b)}:this.addClass=function(a,b){this.hasClass(a,b)||(a.className=a.className?[a.className,b].join(" "):b)},this.addClass(a,b)},removeClass:function(a,b){a.classList?this.removeClass=function(a,b){a.classList.remove(b)}:this.removeClass=function(a,b){var c;this.hasClass(a,b)&&(c=a.className,a.className=c.replace(new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g")," "))},this.removeClass(a,b)},toggleClass:function(a,b){this.hasClass(a,b)?this.removeClass(a,b):this.addClass(a,b)}},b.exports=a}()},{}],9:[function(a,b,c){!function(){"use strict";var a;a={exists:function(a){return null!==a},focus:function(a){a&&window.setTimeout(function(){try{a.focus()}catch(b){}},10)},createDiv:function(a,b){var c,d=document.createElement("div");d.innerHTML=b||"";for(c in a)a.hasOwnProperty(c)&&d.setAttribute(c,a[c]);return d},createAndSubmitForm:function(a,b,c){var d,e,f,g='<input type="hidden" name="{{ name }}" value="{{ value }}">',h="";for(f in b)b.hasOwnProperty(f)&&(e=g.replace("{{ name }}",f).replace("{{ value }}",b[f]),h+=e);d=document.createElement("form"),d.action=a,d.method="post",d.target=c?"_blank":"_parent",d.style.visibility="hidden",d.innerHTML=h,document.body.appendChild(d),d.submit()},removeElement:function(a){a&&a.parentElement.removeChild(a)}},b.exports=a}()},{}],10:[function(a,b,c){!function(){"use strict";var a;a={concatNodeList:function(a,b){if(!("object"==typeof a&&void 0!==a.length||"object"==typeof b&&void 0!==b.length))throw new TypeError("The parametters are supposed to be Arrays or Node List.");return a=Array.prototype.slice.call(a),b=Array.prototype.slice.call(b),a.concat(b)},getTopWindow:function(a){var b;return b=a.parent!==a?this.getTopWindow(a.parent):a},getElementsByClassName:function(a,b,c){return document.getElementsByClassName?this.getElementsByClassName=function(a,b,c){var d=[];return b=b||document,"string"!=typeof a?d:b.getElementsByClassName(a)}:document.querySelectorAll?this.getElementsByClassName=function(a,b,c){var d=[];return"string"!=typeof a?d:this.querySelectorAll("."+a,b)}:this.getElementsByClassName=function(a,b,c){var d,e,f,g,h,i=[];if("string"!=typeof a)return i;for(b=b||document,c=c||"*",d=b.getElementsByTagName(c),e=d.length,f=new RegExp("(^|\\s)"+a+"(\\s|$)"),g=0,h=0;e>g;g++)f.test(d[g].className)&&(i[h]=d[g],h++);return i},this.getElementsByClassName(a,b,c)},getElementsByDataAttribute:function(a,b,c){var d,e=[],f=0;if(null!==a)for(d=a.getElementsByTagName("*"),f=0;f<d.length;f++)!d[f].hasAttribute(b)||void 0!==c&&d[f].getAttribute(b)!==c||e.push(d[f]);return e},querySelectorAll:function(a,b){var c;b=b||document;try{c=b.querySelectorAll(a)}catch(d){c=b===document?VEjQuery(a):VEjQuery(b).find(a)}return c},getElementsByQuerySelectors:function(a){var b=0,c=[];if("object"!=typeof a||void 0===a.length)throw new TypeError("The parametter is supposed to be an Array.");for(b=0;b<a.length;b++)c=this.concatNodeList(c,this.querySelectorAll(a[b]));return c},getParentById:function(a,b){var c=a&&a.parentNode,a=null;return c!==document.body&&(c&&c.getAttribute("id")!==b&&(c=this.getParentById(c,b)),a=c),a},getParentByTagName:function(a,b){var c=a&&a.parentNode,a=null;return c&&c.tagName&&(c.tagName.toLowerCase()!==b.toLowerCase()&&(c=this.getParentByTagName(c,b)),a=c),a},getParentByDataAttribute:function(a,b,c){var d=a&&a.parentNode,a=null;return d&&d.hasAttribute&&((!d.hasAttribute(b)||void 0!==c&&d.getAttribute(b)!==c)&&(d=this.getParentByDataAttribute(d,b,c)),a=d),a}},b.exports=a}()},{}],11:[function(a,b,c){!function(){"use strict";var a;a={windowTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},getWindowWidth:function(){return window.innerWidth||document.documentElement.clientWidth},getWindowHeight:function(){return window.innerHeight||document.documentElement.clientHeight}},b.exports=a}()},{}],12:[function(a,b,c){!function(){"use strict";function c(a,b){var c,f,g=!0;return a!==b&&(c=e.getQueryStringObject(a),f=e.getQueryStringObject(b),g=d.areEqual(c,f)),g}var d=a("./Object.js"),e={isInIframe:function(){return window.location!==window.parent.location},referrerIsInDomains:function(a,b){function c(a,b){for(;d<b.length;d++)if(b[d]=b[d].replace(/\./g,"\\."),e=new RegExp("(^|\\.)"+b[d]+"$"),e.test(a))return!0;return!1}var d=0,e=null;return""!==a?0===b.length?!1:(a=a.split("/")[2],a=a.replace("www.",""),c(a,b)):!0},getHref:function(){return window.location.href},createUrl:function(a,b,c,d){var e,f,g,h,i;if(b)for(e=0,f=b.length;f>e;e++)d&&(b[e]=encodeURIComponent(b[e])),a=0===e?a+("/"!==a[a.length-1]?"/":"")+b[e]:a+"/"+b[e];e=0;for(g in c)d?(h=encodeURIComponent(g),i=encodeURIComponent(c[g])):(h=g,i=c[g]),a=a+(0===e&&-1===a.indexOf("?")?"?":"&")+h+"="+i,e++;return a},getQueryParameter:function(a,b){var c=b?b:window.location.search,d=c.match(new RegExp("[?&]"+a+"=([^&]*)(&?)","i"));return d?decodeURIComponent(d[1]):d},isURL:function(a){return!0},recursiveURIDecode:function(a){for(var b="";b!==a;){b=a;try{a=decodeURIComponent(b)}catch(c){return a}}return a},getDomainHost:function(a){var b,c=this,d="";return c.isURL(a)&&(b=document.createElement("a"),b.href=a,d=b.hostname),d},getSearchEngineKeywords:function(){return{google:"q",yahoo:"p",aol:"q",ask:"q",bing:"q",baidu:"wd",yandex:"text"}},getSearchEngineRegExp:function(){var a,b="",c=this.getSearchEngineKeywords();for(a in c)a.hasOwnProperty()||(b=b+"|"+a);return b.replace("|","")},getSearchEngine:function(a){var b,c=new RegExp(".*?(\\.|://)("+this.getSearchEngineRegExp()+")\\..*");return b=c.test(a)?a.replace(c,"$2"):!1},encodeParameter:function(a){return encodeURIComponent(a)},areUrlsEqual:function(a,b,d){var e,f,g=!0;return d=d||{includeProtocol:!0},a=a.toLowerCase(),b=b.toLowerCase(),a!==b&&(e=document.createElement("a"),f=document.createElement("a"),e.href=a,f.href=b,(d.includeProtocol&&e.protocol!==f.protocol||e.host!==f.host||e.port!==f.port||e.pathname!==f.pathname||!c(e.search.substr(1),f.search.substr(1)))&&(g=!1)),g},getQueryStringObject:function(a){var b,c,d,e={};if(a)for(b=a.split("&"),d=0;d<b.length;d++)c=b[d].split("="),0!==c.length&&(e[decodeURIComponent(c[0])]=decodeURIComponent(c[1]));return e}};b.exports=e}()},{"./Object.js":15}],13:[function(a,b,c){!function(){"use strict";var c=a("./Dom.js"),d={addEvent:function(a,b,c,d){return a.addEventListener?this.addEvent=function(a,b,c,d){return d=d?!0:!1,a.addEventListener(b,c,d),!0}:a.attachEvent?this.addEvent=function(a,b,c){return a.attachEvent("on"+b,c),!0}:this.addEvent=function(){return!1},this.addEvent(a,b,c,d)},removeEvent:function(a,b,c,d){return a.removeEventListener?this.removeEvent=function(a,b,c,d){return d=d?!0:!1,a.removeEventListener(b,c,d),!0}:a.detachEvent?this.removeEvent=function(a,b,c){return a.detachEvent("on"+b,c),!0}:this.removeEvent=function(){return!1},this.removeEvent(a,b,c,d)},addEventsToArray:function(a,b,c,d){var e,f;if(void 0===a)throw new TypeError("Argument array should not be undefined or NULL.");for(f=a.length>>>0,e=0;f>e;e++)this.addEvent(a[e],b,c,d)},removeEventsFromArray:function(a,b,c,d){var e,f,g=!0,h=!0;if("undefined"==typeof a)throw new TypeError("Argument array should not be undefined or NULL.");for(e=a.length>>>0,f=0;e>f;f++)h=this.removeEvent(a[f],b,c,d),g=h&&g?!0:!1;return g},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,a},getSrcElement:function(a){return a.target||a.srcElement},onClick:function(a,b){c.exists(a)&&this.addEvent(a,"click",b)},isOpeningNewWindow:function(a){var b=!1,c=!1;if(a.which)switch(a.which){case 1:b=!0;break;case 2:c=!0}else switch(a.button){case 1:b=!0;break;case 4:c=!0}return c||b&&(a.shiftKey||a.ctrlKey)},checkRightClick:function(a){return a.wich&&3===a.wich||!a.wich&&a.button&&2===a.button}};b.exports=d}()},{"./Dom.js":6}],14:[function(a,b,c){!function(){"use strict";var c=a("./Shell.js"),d={parseJSON:function(a,b){var d=a;if("object"!=typeof a&&"undefined"!=typeof JSON)try{d=window.JSON.parse(a)}catch(e){b&&c.log(b)}return d},stringify:function(a,b){var d=a;if("string"!=typeof data&&"undefined"!=typeof JSON)try{d=window.JSON.stringify(a)}catch(e){b&&c.log(b)}return d}};b.exports=d}()},{"./Shell.js":16}],15:[function(a,b,c){!function(){"use strict";var a={create:function(a){function b(){}var c={};return a&&(Object.create?c=Object.create(a):(b.prototype=a,c=new b)),c},isEmpty:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return!1;return!0},areEqual:function(a,b){function c(e,f){for(d in e){if("object"==typeof e[d]&&f[d]){if(!c(e[d],f[d]))return!1}else if(e[d]!==f[d])return!1;delete a[d],delete b[d]}return!0}var d="";return c(a,b)&&c(b,a)},length:function(a){var b=0,c="";if("object"!=typeof a)throw new TypeError("The parametter must be an object.");for(c in a)b++;return b},concatenate:function(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=a[c]);for(c in b)b.hasOwnProperty(c)&&!d.hasOwnProperty(c)&&(d[c]=b[c]);return d},toLowerCase:function(a){var b=null,c={},d=null,e=null;for(b in a)if(d=b.toLowerCase(),"undefined"==typeof a[d]&&d!==b)switch(e=a[b],typeof e){case"string":c[d]=e.toLowerCase();break;case"object":if(null!==e&&"undefined"==typeof e.length){c[d]=this.toLowerCase(e);break}default:c[d]=e}else d===b&&(c[b]=a[b]);return c}};b.exports=a}()},{}],16:[function(a,b,c){!function(){"use strict";var a={log:function(a){try{settings.consoleMessagesEnabled&&console.log("VeApps: "+a)}catch(b){}},info:function(a){try{settings.consoleMessagesEnabled&&console.info("VeApps: "+a)}catch(b){}},error:function(a){try{settings.consoleMessagesEnabled&&console.error("VeApps: "+a)}catch(b){}}};b.exports=a}()},{}]},{},[3]);